<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jslhrd.yorimichi.mapper.AddressMapper">

  <select id="selectById" parameterType="long" resultType="com.jslhrd.yorimichi.domain.AddressDTO">
    SELECT
      id AS address_id, road_id, detail,
      road_address_text, jibun_address_text,
      latitude, longitude, created_at, updated_at
    FROM address
    WHERE id = #{addressId}
  </select>

  <insert id="insert" parameterType="com.jslhrd.yorimichi.domain.AddressDTO">
    INSERT INTO address (
      road_id, detail, road_address_text, jibun_address_text,
      latitude, longitude, created_at, updated_at
    ) VALUES (
      #{roadId}, #{detail}, #{roadAddressText}, #{jibunAddressText},
      #{latitude}, #{longitude}, #{createdAt}, #{updatedAt}
    )
  </insert>

  <update id="update" parameterType="com.jslhrd.yorimichi.domain.AddressDTO">
    UPDATE address
    SET road_id = #{roadId},
        detail = #{detail},
        road_address_text = #{roadAddressText},
        jibun_address_text = #{jibunAddressText},
        latitude = #{latitude},
        longitude = #{longitude},
        created_at = #{createdAt},
        updated_at = #{updatedAt}
    WHERE id = #{addressId}
  </update>

  <delete id="deleteById" parameterType="long">
    DELETE FROM address WHERE id = #{addressId}
  </delete>

  <select id="listByRoadId" parameterType="long" resultType="com.jslhrd.yorimichi.domain.AddressDTO">
    SELECT
      id AS address_id, road_id, detail,
      road_address_text, jibun_address_text,
      latitude, longitude, created_at, updated_at
    FROM address
    WHERE road_id = #{roadId}
    ORDER BY id DESC
  </select>

</mapper>
