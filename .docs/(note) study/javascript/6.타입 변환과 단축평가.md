## 타입 변환과 단축평가
### 타입 변환이란
개발자가 의도적으로 값의 타입을 변환하는 것.  
그것을 **명시적 타입 변환** 또는 **타입캐스팅**이라고 한다.

개발자 의도와 상관없는 자바스크립트 엔진에 의한 암묵적 변환은  
**암묵적 타입 변환** 혹은 **타입 강제 변환**이라고 한다.

위의 명시적 암묵적 방법을 쓰도라도 기존 원시값을 직접 변경하는 것은 아님.  
원시값은 변경 불가능한 값 immutable value이므로 변경할 수 없다.
타입 변환이란 기존 원시 값을 사용해서 다른 타입의 새로운 원시 값을 생성하는 것.

### 암묵적 타입 변환
#### 문자열 타입으로 변환
각 원시타입 + ''
- 숫자타입 = '값'
- 불리언타입 = '값'
- null타입 = '값'
- undefined타입 = '값'
- symbol타입 + '' = Type Error: Cannot convert a Symbol value to a string
  
각 객체타입 + ''
- ({}) = '[object Object]'
- Math = '[object Math]'
- [] = ""
- [10, 20] = "10,20"
- (function(){}) = "function(){}
- Array = "function Array() { [native code] }"

#### 숫자타입으로 변환
산술 연산자를 이용
- number타입과 string타입(숫자형태) = number타입
- number타입과 string타입(숫자형태아님) = NaN(이것도 숫자타입 값의 일부)

비교 연산자를 이용
- number 타입과 string타입(숫자형태)의 비교시 암묵적 타입 변환으로 비교 후 다시 불리언 타입으로 변환
  
단항 연산자를 이용 (단항 연산자의 특징은 숫자타입으로 바꿔버린다.)
문자열 타입
- +'' // 0
- +'0' // 0
- +'1' // 1
- +'string' // NaN

불리언 타입
- +true // 1
- +false // 0

null타입
- +null // 0

undefined 타입
- +undefined // NaN

// 심벌 타입
- +Symbol() // TypeError: Cannot convert a Symbol value to a number

// 객체 타입
- +{} // NaN
- +[] // 0
- +[10,20] // NaN
- +(function(){}) // NaN

#### 불리언 타입으로 변환
if문이나 for문과 같은 제어문 또는 삼항 조건 연산자의 조건식은 불리언 값  
즉 논리적 참/거짓으로 평가되어야 하는 표현식이다.  
자바스크립트 엔진은 조건식의 평가 결과를 불리언 타입으로 암묵적 타입 변환한다.

이때 자바스크립트 엔진은 불리언 타입이 아닌 값을 Truthy 값(참으로 평가되는 값)과 Falsy 값(거짓으로 평가되는 값)으로 구분한다.

Falsy 값
- false
- undefined
- null
- 0, -0
- NaN
- ''(문자열)

그 외의 값은 전부 Truthy 값

### 명시적 타입 변환
#### 문자열 타입으로 변환
문자열 타입이 아닌 값을 문자열 타입으로 변환하는 방법은 다음과 같다
1. String 생성자 함수를 new 연산자 없이 호출하는 방법
String(값);
2. Object.prototype.toString 메서드를 사용하는 방법
(값).toString();
3. 문자열 연결 연산자를 이용하는 방법
값+'';

#### 숫자 타입으로 변환
숫자 타입이 아닌 값을 숫지 타입으로 변환하는 방법은 다음과 같다
1. Number 생성자 함수를 new 연산자 없이 호출하는 방법
Number('0');
2. parseInt.parseFloat 함수를 사용하는 방법(문자열만 숫자 타입으로 변환 가능)
parseInt('값');
3. + 단항 산술 연산자를 이용하는 방법
+값;
4. * 산술 연산자를 이용하는 방법
값 * 1;

#### 불리언 타입으로 변환
불리언 타입이 아닌 값을 불리언 타입으로 변환하는 방법
1. Boolean 생성자 함수를 new 연산자 없이 호출하는 방법
Boolean(값);
2. ! 부정 논리 연산자를 두 번 사용하는 방법
!!값;

### 단축 평가
#### 논리 연산자를 사용한 단축 평가
논리합과 논리곱 연산자 표현식의 평가 결과는 불리언 값이 아닐 수 있다.

'cat' && 'dog' // 'dog'  
논리곱 연산자는 좌-> 우로 평가 진행됨  
둘 모두가 true로 평가될 때 true를 반환.  
좌항 평가 후 true면 우항을 평가함. 그리고 우항이 true면 연산 결과를 결정하는 우항 문자열을 그대로 반환  

'cat' || 'dog' // 'cat'
논리합도 똑같은 논리로 연산 결과를 결정한 항의 값을 반환함.  

단축평가를 사용하면 if문을 대체할 수 있다.
어떤 조건이 Truthy 값(참으로 평가되는 값)일 때 무언가를 해야한다면 논리곱 연산자 표현식으로 if문을 대체할 수 있다.  

```bash
var done = true;
var message = '';

if (done) message = '완료';
```
if문을 아래 형태로 바꿀 수 있다.
```bash
message = done && '완료';
```

어떤 조건이 Falsy 값일 때 무언가를 해야 한담녀 논리합(||)연산자 표현식으로 if문을 대체할 수 있다.  
```bash
var done = false;
var message = '';

if (!done) message = '미완료';
```
if문을 아래 형태로 바꿀 수 있다.
```bash
message = done || '미완료';
```

##### 활용처
객체를 가리키기를 기대하는 변수가 null또는 undefined가 아닌지 확인하고 프로퍼티를 참조할 때
```bash
var elem = null;
var value= elem.value;
```
이대로 실행하면 TypeError: Cannot read property 'value' of null로 프로그램 강제 종료됨.  

```bash
var elem = null;
// elem null이나 undefined와 같은 Falsy 값이면 elem으로 평가되고
// elem Truthy 값이면 elem.value 평가된다.
var value = elem && elem.value; // null
```
함수 매개변수에 기본값을 설정할 때  
함수를 호출할 때 인수를 전달하지 않으면 매개변수에는 undefined가 할당된다.  
이때 단축 평가를 사용해 매개변수의 기본값을 설정하면 undefined로 인해 발생할 수 있는 에러를 방지할 수 있다.

```bash
function getStringLength(str){
    str = str || '';
    return str.length;
}

getStringLength(); // 0
getStringLength('hi'); // 2
```

ES6의 매개변수의 기본값 설정
```bash
function getStringLength(str=''){
    return str.length;
}
getStringLength(); // 0
getStringLength('hi'); // 2

```
#### 옵셔널 체이닝 연산자
ES11(ECMAScript2020)에 도입됨.

```bash
var elem = null;

var value = elem?.value;
```
옵셔널 체이닝 연산자 ?.는 좌항의 피연산자가 null 또는 undefined인 경우 undefined를 반환하고, 그렇지 않으면 우항의 프로퍼티 참조를 이어간다.


```bash
var elem = null;
var value = elem && elem.value;
```
&&에 의해서 elem이 Falsy 값이면 null Truthy 값이면 elem.value의 값을 반환


```bash
var str = '';

var length = str && str.length;
```
str은 ''에 의해 Falsy값이기 때문에 str의 값인 ''를 반환하고, length에는 ''가 할당된다.


```bash
var str = '';
var length = str?.length;
```
str = null이나 undefined가 아닌 ''이기 때문에 그대로 우항의 프로퍼티 참조를 이어가서 ''의 길이인 0을 할당한다.

#### null 병합 연산자
ES11에서 도입됨.  

null 병합 연산자 ??는 좌항의 피연산자가 null 또는 undefined인 경우 우항의 피연산자를 반환하고 그렇지 않으면 좌항의 피연산자를 반환한다. null 병합 연산자 ??는 변수에 기본값을 설정할 때 유용하다.

```bash
var foo = null ?? 'default string';
```
var 키워드로 선언하기 때문에 자동으로 foo에는 undefined가 할당되어 있으며.
좌항이 undefined이기 때문에 우항의 피연산자인 undefined를 반환한다.

